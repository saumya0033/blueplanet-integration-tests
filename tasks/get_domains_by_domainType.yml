- name: 'check for existing domain'
  uri:
    url: '{{bp_integration_tests_server}}/bpocore/market/api/v1/domains?q=domainType:urn:ciena:bp:domain:{{domainType}}'
    method: GET
    validate_certs: no
    headers:
      Content-Type: application/json
      Authorization: "Bearer {{ bp_integration_tests_token }}"
    status_code:
      - 200
  register: result
- name: Set the domains Fact
  set_fact:
    cacheable: true
    domains: "{{ result.json['items'] }}"
- name: print domains
  debug:
    msg: "domains: {{ domains }}"
    verbosity: 3
